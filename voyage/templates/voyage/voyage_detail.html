{% extends 'voyage/base.html' %}



{% block content %}


<header>
	<h1>Voyage Details</h1>
</header>

<div class="fish" id="fish"></div>
<div class="fish" id="fish2"></div>

<div id="form">
	<strong><h2>Name: {{voyage}}</h2></strong>
	<h3>Arrival Port: {{voyage.arrival_port}}</h3>
	<h3>Departure Port: {{voyage.departure_port}}</h3>
	<h3>Time of departure: {{voyage.begining_time}}</h3>
	<h3>Estimated Time of Arrival: {{voyage.end_time}}</h3>

	<h1>Waypoints</h1>
	<button type="button" id="toggle" class="btn btn-primary">Map/List</button>
		<ol id="list" class="hidden">
			{% for waypoint in voyage.waypoint_set.all %}
				<li><a href="{% url 'waypoint' pk=waypoint.pk %}">{{waypoint}}</a>LAT:{{waypoint.position.y}}, LONG:{{waypoint.position.x}}</li>
			{% empty %}
				NO WAYPOINTS
			{% endfor %}
		</ol>

</div>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js"></script>

<script>
    function initialize() {
        var homeLatlng = new google.maps.LatLng({{voyage.departure_port.position.y|floatformat:"6"}},{{voyage.departure_port.position.x|floatformat:"6"}});
        <!--var homeLatlng = new google.maps.LatLng(0,0)-->
        var myOptions = {
            zoom: 5,
            center: homeLatlng,
            mapTypeId: google.maps.MapTypeId.SATELLITE
        };
        var map = new google.maps.Map(document.getElementById("map"), myOptions);

        // create an array of coordinates

        var arrCoords = [];
        {% for waypoint in voyage.waypoint_set.all %}
        	arrCoords.push(new google.maps.LatLng({{waypoint.position.y|floatformat:"6"}},{{waypoint.position.x|floatformat:"6"}}))
  		{% endfor %}

        // draw the route on the map
        var route = new google.maps.Polyline({
            path: arrCoords,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 4,
            geodesic: false,
            map: map
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div id="map"></div>

{% endblock %}

